pipeline {
    agent any
    stages {
        stage('Build') {
			environment {
			HOME = "."
			}
            steps {       	
                echo 'Building..'
				script {
				    sh label: '', script: '''#!/bin/sh

											# include parse_yaml function
											. ./parse_yaml.sh

											# read yaml file
											eval $(parse_yaml zconfig.yml "config_")

											# access yaml content
											echo $config_date


'''
                    sh(returnStdout: true, script: 'echo test.sh')
					}
                }
            }
			
		stage('SonarQube Analysis'){ 
			steps{
					sh "/home/anushav/Downloads/sonar-scanner-3.3.0.1492/bin/sonar-scanner -Dsonar.host.url=http://192.168.109.63:9000 -Dsonar.projectName=TE_DEMO -Dsonar.projectVersion=1.0 -Dsonar.projectKey=TE_DEMO -Dsonar.sources=. -Dsonar.projectBaseDir=."
				}
		}	
		
        
        stage('Test') {
            steps {
                echo 'Testing..'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying....'
            }
        }
    }
}

